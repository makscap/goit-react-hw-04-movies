{"version":3,"sources":["services/movies-api.js","images/imagePlaceholder.png","images/notFound.png","views/ErrorView.js","components/MovieList/MovieList.module.css","tools/slug.js","components/MovieList/MovieList.js","components/SearchForm/SearchForm.module.css","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","components/SearchForm/SearchForm.js","views/MoviesView.js"],"names":["BASE_URL","KEY","fetchByURL","url","a","fetch","response","json","data","api","getTrendingData","getSearchData","query","getMovieById","id","getMovieCast","getMovieReviews","ErrorView","title","style","fontFamily","fontWeight","width","src","notFound","alt","module","exports","makeSlug","string","slugify","lower","MovieList","movies","location","useLocation","navRoute","pathname","search","className","s","wrapper","list","map","movie","movieSlug","item","to","state","link","image","poster_path","imagePlaceholder","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","target","i","arguments","length","source","forEach","getOwnPropertyDescriptors","defineProperties","SearchForm","getSearchQuery","useState","setValue","btn","useRef","form","onSubmit","e","preventDefault","toLowerCase","trim","toast","error","current","blur","input","type","placeholder","onChange","ref","Status","SearchMoviesView","setMovies","status","setStatus","setError","history","useHistory","searchQuery","URLSearchParams","get","useEffect","moviesAPI","then","console","log","results","Error","catch","Loader","message"],"mappings":"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","file":"static/js/movies-search-view.26e2b669.chunk.js","sourcesContent":["const BASE_URL = `https://api.themoviedb.org/3`;\nconst KEY = `e3cd242deca1bad74d91e1e2d7bfed41`;\n\nasync function fetchByURL(url) {\n  const response = await fetch(url);\n  const data = await response.json();\n  return data;\n}\n\nfunction getTrendingData() {\n  const url = `${BASE_URL}/trending/movie/day?api_key=${KEY}&language=en-US`;\n  return fetchByURL(url);\n}\n\nfunction getSearchData(query) {\n  const url = `${BASE_URL}/search/movie?api_key=${KEY}&language=en-US&query=${query}`;\n  return fetchByURL(url);\n}\n\nfunction getMovieById(id) {\n  const url = `${BASE_URL}/movie/${id}?api_key=${KEY}&language=en-US`;\n  return fetchByURL(url);\n}\n\nfunction getMovieCast(id) {\n  const url = `${BASE_URL}/movie/${id}/credits?api_key=${KEY}&language=en-US`;\n  return fetchByURL(url);\n}\n\nfunction getMovieReviews(id) {\n  const url = `${BASE_URL}/movie/${id}/reviews?api_key=${KEY}&language=en-US`;\n  return fetchByURL(url);\n}\n\nconst api = {\n  getTrendingData,\n  getSearchData,\n  getMovieById,\n  getMovieCast,\n  getMovieReviews,\n};\n\nexport default api;","export default __webpack_public_path__ + \"static/media/imagePlaceholder.298b9820.png\";","export default __webpack_public_path__ + \"static/media/notFound.6ef12178.png\";","import React from 'react';\nimport PropTypes from 'prop-types';\nimport notFound from '../images/notFound.png';\n\nexport default function ErrorView({ title }) {\n  const defaultTitle = 'Oops! No such page :(';\n\n  return (\n    <>\n      <p style={{ fontFamily: 'Roboto, sans-serif', fontWeight: '700' }}>\n        {title || defaultTitle}\n      </p>\n\n      <img style={{ width: '500px' }} src={notFound} alt=\"error\" />\n    </>\n  );\n}\n\nErrorView.propTypes = {\n  title: PropTypes.string,\n};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"MovieList_wrapper__1C9Z6\",\"list\":\"MovieList_list__ykPoV\",\"item\":\"MovieList_item__umyvu\",\"image\":\"MovieList_image__2I3DI\",\"link\":\"MovieList_link__1OSFX\",\"title\":\"MovieList_title__gdraA\"};","import slugify from 'slugify';\n\nconst makeSlug = string => slugify(string, { lower: true });\n\nexport default makeSlug;","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { useLocation } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport s from './MovieList.module.css';\nimport imagePlaceholder from '../../images/imagePlaceholder.png';\nimport makeSlug from '../../tools/slug';\n\nfunction MovieList({ movies, title }) {\n  const location = useLocation();\n  const navRoute = `${location.pathname}${location.search}`;\n\n  return (\n    <div className={s.wrapper}>\n      <h2>{title}</h2>\n      <ul className={s.list}>\n        {movies.map(movie => {\n          const movieSlug = makeSlug(movie.title);\n          return (\n            <li key={movie.id} className={s.item}>\n              <Link\n                to={{\n                  pathname: `/movies/${movieSlug}-${movie.id}`,\n                  state: navRoute,\n                }}\n                className={s.link}\n              >\n                <img\n                  className={s.image}\n                  src={\n                    movie.poster_path\n                      ? `https://image.tmdb.org/t/p/w500${movie.poster_path}`\n                      : imagePlaceholder\n                  }\n                  alt={movie.title}\n                />\n                <p className={s.title}>{movie.title}</p>\n              </Link>\n            </li>\n          );\n        })}\n      </ul>\n    </div>\n  );\n}\n\nexport default MovieList;\n\nMovieList.propTypes = {\n  movies: PropTypes.arrayOf(PropTypes.object).isRequired,\n  title: PropTypes.string.isRequired,\n};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"SearchForm_form__qWosj\",\"input\":\"SearchForm_input__zWLnu\",\"btn\":\"SearchForm_btn__2sO4K\"};","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","import React, { useState, useRef } from 'react';\nimport PropTypes from 'prop-types';\nimport { toast } from 'react-toastify';\nimport s from './SearchForm.module.css';\n\nfunction SearchForm({ getSearchQuery }) {\n  const [value, setValue] = useState('');\n\n  const btn = useRef(null);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    const query = value.toLowerCase().trim();\n    if (query === '') {\n      toast.error('Please enter a query');\n      btn.current.blur();\n      return;\n    }\n    getSearchQuery(query);\n    setValue('');\n    btn.current.blur();\n  };\n\n  return (\n    <form className={s.form} onSubmit={handleSubmit}>\n      <input\n        className={s.input}\n        type=\"text\"\n        value={value}\n        placeholder=\"Search movies\"\n        onChange={e => {\n          setValue(e.target.value);\n        }}\n      />\n      <button type=\"submit\" className={s.btn} ref={btn}>\n        Search\n      </button>\n    </form>\n  );\n}\n\nexport default SearchForm;\n\nSearchForm.propTypes = {\n  getSearchQuery: PropTypes.func.isRequired,\n};","import React, { useState, useEffect } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport moviesAPI from '../services/movies-api';\nimport SearchForm from '../components/SearchForm';\nimport MovieList from '../components/MovieList';\nimport Loader from '../components/Loader';\nimport ErrorView from './ErrorView';\n\nconst Status = {\n  IDLE: 'idle',\n  PENDING: 'pending',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n};\n\nexport default function SearchMoviesView() {\n  const [movies, setMovies] = useState(null);\n  const [status, setStatus] = useState(Status.IDLE);\n  const [error, setError] = useState(null);\n\n  const history = useHistory();\n  const location = useLocation();\n\n  const searchQuery = new URLSearchParams(location.search).get('query') ?? '';\n\n  const onSearchQueryChange = query => {\n    history.push({ ...location, search: `query=${query}` });\n  };\n\n  useEffect(() => {\n    if (searchQuery === '') {\n      return;\n    }\n    setStatus(Status.PENDING);\n    moviesAPI\n      .getSearchData(searchQuery)\n      .then(data => {\n        console.log(data.results);\n        if (data.results.length === 0) {\n          throw new Error(`No results for ${searchQuery}. Try another query.`);\n        }\n        setMovies(data.results);\n        setStatus(Status.RESOLVED);\n      })\n      .catch(error => {\n        setError(error);\n        setStatus(Status.REJECTED);\n      });\n  }, [searchQuery]);\n\n  return (\n    <>\n      <SearchForm getSearchQuery={onSearchQueryChange} />\n      {status === Status.PENDING && <Loader />}\n      {searchQuery && status === Status.RESOLVED && (\n        <MovieList\n          movies={movies}\n          title={`Search results for ${searchQuery}`}\n        />\n      )}\n      {status === Status.REJECTED && <ErrorView title={error.message} />}\n    </>\n  );\n}"],"sourceRoot":""}